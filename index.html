<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Anniversary Hunt â€” Scan & Reveal</title>
<style>
  :root{
    --p1:#ff7ab6; --p2:#9b61ff; --card:#fff; --muted:#7a6b7a;
  }
  body{
    font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    margin:0; min-height:100vh;
    background: linear-gradient(135deg,var(--p1),var(--p2));
    color:#222;
    display:flex; align-items:center; justify-content:center;
    padding:20px;
  }
  .wrap{ width:100%; max-width:760px; }
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.95));
    border-radius:14px; padding:28px; box-shadow:0 12px 30px rgba(0,0,0,0.18);
  }
  h1{ margin:0 0 8px 0; font-size:20px; letter-spacing:0.2px;}
  .sub{ color:var(--muted); margin-bottom:18px;}
  .clue{ font-size:18px; margin:16px 0; line-height:1.4; }
  .mini{ background:linear-gradient(90deg, #fff0, #fff0); padding:12px; border-radius:8px; border:1px dashed #f0c; }
  .label{ font-weight:600; font-size:13px; color:#6b5870; margin-top:12px; }
  .trigger{ margin-top:8px; font-size:16px; background:#ffeff9; padding:10px 12px; border-radius:8px; display:inline-block;}
  .alex{ margin-top:14px; font-style:italic; color:#4c2b4c; }
  .control-row{ margin-top:18px; display:flex; gap:8px; flex-wrap:wrap; }
  button{ background:transparent; border:2px solid rgba(155,97,255,0.12); padding:10px 12px; border-radius:10px; cursor:pointer; }
  .qr{ margin-top:18px; text-align:center; }
  footer{ margin-top:20px; color:var(--muted); font-size:13px; text-align:center;}
  .admin-list{ margin-top:14px; max-height:260px; overflow:auto; padding:8px; border-radius:8px; background:#fff7; }
  .muted{ color:var(--muted); font-size:13px; }
  @media (max-width:520px){ .card{ padding:18px } h1{ font-size:18px } }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card">
      <h1>2-Year Anniversary Hunt</h1>
      <div class="sub">Scan the QR. This page reveals a clue, a sweet note, and the phrase to say to Alex.</div>

      <div id="content">
        <div class="muted">Waiting for a clue... scan a QR or open the page with <code>?clue=1</code> (1â€“10).</div>
      </div>

      <div class="control-row" id="controls" style="display:none;">
        <button id="speakBtn">Speak Alex's line (play)</button>
        <button id="nextBtn">Reveal Next</button>
        <button id="allBtn">Show All (preview)</button>
      </div>

      <div class="qr" id="qr"></div>

      <footer>
        Tip: host this file on GitHub Pages or any static host. Use the page URL + <code>?clue=1</code> to create your QR codes.
      </footer>
    </div>
  </div>

<script>
/* ====== DATA: clues + notes + triggers + alex lines ====== */
const CLUES = [
  null,
  { place:"Pillow", clue:"Start where your head rests at nightâ€¦ a little sweetness is waiting for you ğŸ˜˜",
    mini:"A little sweetness to startâ€¦ just like you make my mornings better ğŸ˜˜",
    trigger:"Yum, I found my first treat!",
    alex:"Mmmâ€¦ just like your smile, sweet and irresistible. This adventure is going to be hot and full of funâ€”enjoy every second ğŸ˜ğŸ’–",
    whisper:"Ready to play, my love?"
  },
  { place:"Under bed", clue:"Look under the place where your legs relaxâ€¦ something soft and playful awaits ğŸ˜",
    mini:"Soft and playfulâ€¦ imagine wearing this for me tonight ğŸ˜ğŸ”¥",
    trigger:"Oooh, whatâ€™s this?",
    alex:"Ooohâ€¦ careful now, that oneâ€™s dangerously flirty. I can already feel the sparksâ€”youâ€™re irresistible ğŸ˜ŒğŸ”¥",
    whisper:"I hope you like this oneâ€¦ very tempting ğŸ˜"
  },
  { place:"Wardrobe", clue:"Peek where your favorite outfits hideâ€¦ a little sweet surprise is among your clothes ğŸ’–",
    mini:"Sweet like this, but nothing compares to you ğŸ’–",
    trigger:"Another treat for me!",
    alex:"Sweet, just like youâ€¦ every bite makes me think of your smile. I canâ€™t wait to see what you reach for next ğŸ˜ğŸ’–",
    whisper:"Almost halfwayâ€¦ can you handle the next one?"
  },
  { place:"Oven", clue:"Where it gets hot and steamyâ€¦ your next surprise is baking ğŸ˜ğŸ”¥",
    mini:"Hot and irresistibleâ€¦ canâ€™t wait to see this on you ğŸ˜˜â¤ï¸",
    trigger:"Wowâ€¦ look at this!",
    alex:"Hot, hot, hotâ€¦ just like someone I know. I can already imagine how amazing youâ€™ll lookâ€”it's going to be unforgettable ğŸ˜ğŸ”¥",
    whisper:"Be carefulâ€¦ this one might burn your heart ğŸ˜"
  },
  { place:"Kitchen cupboard", clue:"Where we store little daily treatsâ€¦ a sweet bite awaits ğŸ«",
    mini:"Another treat for my favorite girlâ€¦ enjoy every bite ğŸ˜",
    trigger:"Mmm, chocolate again!",
    alex:"Every bite makes me think of youâ€¦ naughty and sweet. Keep goingâ€”you're doing so well ğŸ˜ŒğŸ«",
    whisper:"Carefulâ€¦ these treats might make you even sweeter ğŸ˜"
  },
  { place:"Bathroom", clue:"Time to freshen upâ€¦ a playful surprise is waiting where you wash up ğŸ˜",
    mini:"Dangerously cuteâ€¦ just like you ğŸ˜ŒğŸ”¥ I might not survive seeing these on you laterâ€¦",
    trigger:"Oh myâ€¦ these are cute!",
    alex:"Ooohâ€¦ dangerously cute. Iâ€™m already imagining you wearing theseâ€”it's driving me wild ğŸ˜ŒğŸ’–",
    whisper:"Hmmâ€¦ youâ€™re driving me wild ğŸ˜"
  },
  { place:"Behind storage box", clue:"Behind the box where extra things hideâ€¦ another treat is sneaky ğŸ˜˜",
    mini:"Almost thereâ€¦ a little sweetness before the grand finale ğŸ˜˜",
    trigger:"Yay, another one!",
    alex:"Almost thereâ€¦ the sweetest is still waiting. I canâ€™t wait to see your reaction when you find it ğŸ˜ğŸ”¥",
    whisper:"I love watching you get closer to your final surprise ğŸ˜Œ"
  },
  { place:"Fridge", clue:"Look inside the cold placeâ€¦ a chill but sweet surprise awaits ğŸ˜",
    mini:"Cold outsideâ€¦ but you keep my heart on fire ğŸ”¥ğŸ’–",
    trigger:"Cold, but yummy!",
    alex:"Mmmâ€¦ cold outside, but youâ€™re heating up my heart. Each move you make is making me crave you more ğŸ˜ğŸ”¥",
    whisper:"Getting closerâ€¦ can you feel it?"
  },
  { place:"On top of wardrobe", clue:"The next treasure is up highâ€¦ reach for the top to claim it ğŸ˜Œ",
    mini:"Wear me closeâ€¦ my eyes are always with you ğŸ˜â¤ï¸",
    trigger:"Oh wow, a bracelet!",
    alex:"Wear me closeâ€¦ Iâ€™ll always be watching you. Imagine me tracing your wrist with my fingersâ€”I'm melting already ğŸ˜ŒğŸ”¥",
    whisper:"Careful climbingâ€¦ donâ€™t fall into my arms ğŸ˜"
  },
  { place:"Under kitchen unit", clue:"Final stretch! Blindfold your eyesâ€¦ let your hands feel the way to the last surprise ğŸ˜ğŸ”¥",
    mini:"Two years with youâ€¦ and every day still feels like the first ğŸ’•ğŸ”¥",
    trigger:"Found itâ€¦ my final surprise!",
    alex:"Ooohâ€¦ this oneâ€™s just for you. Two years of love, teasing, and unforgettable momentsâ€”and the night is only beginning ğŸ˜ŒğŸ”¥",
    whisper:"Two years downâ€¦ forever to go. Come here, my love ğŸ˜˜â¤ï¸"
  }
];

/* ====== helper: get query param ====== */
function getParam(name){
  const u = new URL(location.href);
  return u.searchParams.get(name);
}

/* ====== render function ====== */
function renderClue(id){
  const cont = document.getElementById('content');
  const controls = document.getElementById('controls');
  const qrEl = document.getElementById('qr');
  if(!id || isNaN(id) || id<1 || id>10){
    cont.innerHTML = `<div class="muted">Open a clue by visiting <code>?clue=1</code> through <code>?clue=10</code>, or scan a QR card. Preview all: <a href="?admin=true">?admin=true</a></div>`;
    controls.style.display='none';
    qrEl.innerHTML='';
    return;
  }
  const d = CLUES[id];
  cont.innerHTML = `
    <div class="label">Clue #${id} â€” <strong>${d.place}</strong></div>
    <div class="clue">${d.clue}</div>
    <div class="label">Mini note</div>
    <div class="mini">${d.mini}</div>
    <div class="label">Say this to Alex</div>
    <div class="trigger">"${d.trigger}"</div>
    <div class="label">Alex will say</div>
    <div class="alex">"${d.alex}"</div>
    <div class="label">A little whisper from me</div>
    <div class="muted">${d.whisper}</div>
  `;
  controls.style.display='flex';
  // create QR (link to this same page with clue param)
  const url = location.origin + location.pathname + '?clue=' + id;
  const encoder = encodeURIComponent(url);
  // Use Google Chart API for QR image
  const qrUrl = 'https://chart.googleapis.com/chart?chs=300x300&cht=qr&chl=' + encoder;
  qrEl.innerHTML = `<div class="muted">QR for this clue (print this on the sticker):</div><img src="${qrUrl}" alt="qr" style="margin-top:8px;border-radius:8px;max-width:60%;height:auto">`;
}

/* speak alex line using Web Speech API */
function speakText(text){
  if(!('speechSynthesis' in window)) { alert('Speech not supported on this device.'); return; }
  const u = new SpeechSynthesisUtterance(text);
  u.rate = 0.95;
  u.pitch = 1.05;
  u.lang = 'en-US';
  speechSynthesis.cancel(); // stop other
  speechSynthesis.speak(u);
}

/* admin preview list */
function showAdmin(){
  const cont = document.getElementById('content');
  let html = '<div class="label">Preview all clues</div><div class="admin-list">';
  for(let i=1;i<=10;i++){
    const d=CLUES[i];
    html += `<div style="padding:8px;border-bottom:1px dashed #eee"><strong>Clue ${i} â€” ${d.place}</strong><div style="font-size:14px;margin-top:6px">${d.clue}</div><div style="margin-top:6px"><em>Say:</em> "${d.trigger}"</div></div>`;
  }
  html += '</div>';
  cont.innerHTML = html;
  document.getElementById('controls').style.display='flex';
  document.getElementById('qr').innerHTML='';
}

/* init */
(function(){
  const q = getParam('clue');
  const admin = getParam('admin');
  if(admin==='true') { showAdmin(); return; }
  if(q) {
    renderClue(Number(q));
  } else {
    renderClue(null);
  }

  document.getElementById('speakBtn').onclick = ()=>{
    const q = getParam('clue');
    if(!q) return;
    speakText(CLUES[q].alex);
  };
  document.getElementById('nextBtn').onclick = ()=>{
    const q = Number(getParam('clue') || 0);
    const nxt = Math.min(10, q+1) || 1;
    const newUrl = location.origin + location.pathname + '?clue=' + nxt;
    history.pushState({},'',newUrl);
    renderClue(nxt);
  };
  document.getElementById('allBtn').onclick = ()=>{
    const newUrl = location.origin + location.pathname + '?admin=true';
    history.pushState({},'',newUrl);
    showAdmin();
  };

  window.addEventListener('popstate', ()=>{
    const q = getParam('clue'); const admin = getParam('admin');
    if(admin==='true') showAdmin(); else renderClue(Number(q));
  });
})();
</script>
</body>
</html>
